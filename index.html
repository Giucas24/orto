<!DOCTYPE html>
<html lang="it">

<head>
    <meta charset="UTF-8" />
    <title>🥕 Orto Conquista - La Battaglia Vegetale</title>
    <link rel="stylesheet" href="style.css">
</head>

<body>
    <div class="game-container">
        <div class="map-container">
            <div class="title">🗺️ ISOLA DELL'ORTO GLOBALE 🗺️</div>
            <canvas id="mapCanvas" width="1000" height="700"></canvas>
        </div>

        <div class="controls-panel">
            <!-- Sezione Leader -->
            <div class="leader-section" id="leader-section">
                <div class="leader-avatar" id="leader-avatar">❄️</div>
                <h3 id="leader-title">Generale Cavolo Brassius</h3>
                <div class="faction-name" id="faction-name">Clan dei Cavolfiori</div>

                <div class="leader-stats">
                    <div class="stat-row">
                        <span>🏰 Territori:</span>
                        <span id="territory-count">3</span>
                    </div>
                    <div class="stat-row">
                        <span>🎖️ Rinforzi:</span>
                        <span id="reinforcements">4</span>
                    </div>
                    <div class="stat-row">
                        <span>🎯 Turno:</span>
                        <span id="turn-counter">1</span>
                    </div>
                </div>

                <div class="ability-info">
                    <div class="ability-title">🔮 <span id="ability-name">Resistenza Glaciale</span></div>
                    <div class="ability-desc" id="ability-desc">Una volta per turno può rigenerare 1 unità</div>
                    <div class="ability-bonus">💪 <span id="faction-bonus">+1 difesa in montagna</span></div>
                    <div class="ability-weakness">⚠️ <span id="faction-weakness">-1 vs Carote</span></div>
                </div>

                <button class="button special" id="leader-ability" onclick="useLeaderAbility()">
                    🌟 Usa Abilità Leader
                </button>
            </div>

            <!-- Sezione Carte Evento -->
            <div class="cards-section" id="cards-section">
                <h4>🎴 Carte Evento</h4>
                <div class="cards-info">
                    <div class="cards-status">
                        <span>Carte in mano: <span id="cards-in-hand">0</span></span>
                        <span>Mazzo: <span id="cards-remaining">12</span></span>
                    </div>

                    <div class="cards-actions">
                        <button class="button" id="draw-card" onclick="drawEventCard()">
                            🎲 Pesca Carta
                        </button>
                        <button class="button" id="view-cards" onclick="openCardsOverlay()" disabled>
                            👁️ Visualizza Carte
                        </button>
                    </div>
                </div>
            </div>

            <!-- Controlli di Gioco -->
            <div class="game-controls">
                <div class="phase-indicator" id="phase-indicator">
                    <strong>🎮 Fase: <span id="current-phase">Rinforzi</span></strong>
                    <div id="phase-timer" style="margin-top: 5px; font-size: 12px;">⏰ Tempo illimitato</div>
                </div>

                <div class="controls">
                    <button class="button" id="place-reinforcements" onclick="placeReinforcements()">
                        ⚡ Piazza Rinforzi Auto
                    </button>
                    <button class="button attack" id="attack-btn" onclick="toggleAttackMode()" disabled>
                        ⚔️ Modalità Attacco
                    </button>
                    <button class="button" id="end-turn" onclick="endTurn()" disabled>
                        🔄 Fine Turno
                    </button>
                </div>
            </div>

            <!-- Log delle Battaglie -->
            <div class="battle-log">
                <h4>📜 Log delle Battaglie</h4>
                <div id="log-content">
                    <div class="log-entry log-move">🎮 Orto Conquista iniziato! I Cavolfiori preparano la loro strategia
                        glaciale...</div>
                </div>
            </div>

            <!-- Statistiche -->
            <div class="stats-panel">
                <h4>📊 Statistiche</h4>
                <div class="stat-item">
                    <span>🌍 Territori Totali:</span>
                    <span>16</span>
                </div>
                <div class="stat-item">
                    <span>⚔️ Battaglie:</span>
                    <span id="battle-count">0</span>
                </div>
                <div class="stat-item">
                    <span>🎯 Obiettivo:</span>
                    <span>Conquista Totale</span>
                </div>
            </div>
        </div>
    </div>

    <!-- Overlay per le fasi -->
    <div class="phase-overlay" id="phase-overlay">
        <div class="phase-content">
            <div class="phase-icon" id="phase-icon">⚡</div>
            <div class="phase-text" id="phase-text">Fase Rinforzi</div>
        </div>
    </div>

    <!-- Overlay carte in mano -->
    <div class="cards-overlay" id="cards-overlay">
        <div class="cards-overlay-content">
            <div class="cards-header">
                <h3>🎴 Le Tue Carte Evento</h3>
                <button class="close-btn" onclick="closeCardsOverlay()">×</button>
            </div>
            <div class="cards-grid" id="cards-grid">
                <!-- Le carte del giocatore verranno mostrate qui -->
            </div>
        </div>
    </div>

    <!-- Overlay carta pescata -->
    <div class="card-drawn-overlay" id="card-drawn-overlay">
        <div class="card-drawn-content">
            <div class="drawn-card" id="drawn-card">
                <div class="card-header">
                    <span class="card-name" id="drawn-card-name">Nome Carta</span>
                    <button class="close-card" onclick="closeDrawnCard()">×</button>
                </div>
                <div class="card-description" id="drawn-card-description">Descrizione della carta</div>
                <div class="card-effect" id="drawn-card-effect">Effetto speciale</div>
                <button class="button use-card" id="use-drawn-card" onclick="useDrawnCard()">🎯 Usa Carta</button>
            </div>
        </div>
    </div>

    <div class="victory-screen" id="victory-screen">
        <div class="victory-content">
            <h2 id="victory-title">🏆 VITTORIA! 🏆</h2>
            <p id="victory-message">I Cavolfiori hanno conquistato l'orto!</p>
            <button class="button" onclick="resetGame()">🔄 Nuova Partita</button>
        </div>
    </div>

    <script src="script.js"></script>
</body>

</html>