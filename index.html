<!DOCTYPE html>
<html lang="it">

<head>
    <meta charset="UTF-8">
    <title>Orto Conquista - Territori e Turni</title>
    <style>
        body {
            font-family: sans-serif;
            background: #f1f8e9;
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        svg {
            margin-top: 20px;
            border: 2px solid #444;
            width: 600px;
            height: 400px;
        }

        .territory {
            stroke: #333;
            stroke-width: 2;
            cursor: pointer;
            transition: fill 0.2s;
        }

        .territory:hover {
            fill-opacity: 0.8;
        }

        text {
            font-size: 14px;
            pointer-events: none;
            font-weight: bold;
        }

        #info {
            margin-top: 10px;
            font-size: 18px;
        }

        #endTurn {
            margin-top: 10px;
            padding: 10px 20px;
            font-size: 16px;
            background: #81c784;
            border: none;
            cursor: pointer;
        }
    </style>
</head>

<body>
    <h1>ðŸ¥• Orto Conquista â€“ Versione con Turni</h1>
    <svg id="map" viewBox="0 0 600 400">
        <!-- I territori (10 rettangoli semplificati) -->
        <g id="Territorio1" class="territory" data-name="Cipollandia">
            <polygon points="50,50 150,50 130,130 30,130" />
            <text x="80" y="100">0</text>
        </g>
        <g id="Territorio2" class="territory" data-name="Carotegna">
            <polygon points="150,50 250,50 270,130 130,130" />
            <text x="180" y="100">0</text>
        </g>
        <g id="Territorio3" class="territory" data-name="Maisonia">
            <polygon points="250,50 350,50 370,130 270,130" />
            <text x="280" y="100">0</text>
        </g>
        <g id="Territorio4" class="territory" data-name="Patatistan">
            <polygon points="350,50 450,50 470,130 370,130" />
            <text x="380" y="100">0</text>
        </g>
        <g id="Territorio5" class="territory" data-name="Zuccalopoli">
            <polygon points="450,50 550,50 570,130 470,130" />
            <text x="480" y="100">0</text>
        </g>
        <g id="Territorio6" class="territory" data-name="Broccoburgo">
            <polygon points="50,130 130,130 110,210 30,210" />
            <text x="70" y="180">0</text>
        </g>
        <g id="Territorio7" class="territory" data-name="Spinaciovia">
            <polygon points="130,130 270,130 250,210 110,210" />
            <text x="170" y="180">0</text>
        </g>
        <g id="Territorio8" class="territory" data-name="Peperonilandia">
            <polygon points="270,130 370,130 350,210 250,210" />
            <text x="290" y="180">0</text>
        </g>
        <g id="Territorio9" class="territory" data-name="Radicchioland">
            <polygon points="370,130 470,130 450,210 350,210" />
            <text x="390" y="180">0</text>
        </g>
        <g id="Territorio10" class="territory" data-name="Lattugia City">
            <polygon points="470,130 570,130 550,210 450,210" />
            <text x="490" y="180">0</text>
        </g>
    </svg>

    <div id="info">Turno: <strong id="currentPlayer">Player 1</strong></div>
    <button id="endTurn">Fine turno</button>

    <script>
        const players = ['Player 1', 'Player 2'];
        const playerColors = { 'Player 1': '#e57373', 'Player 2': '#64b5f6' };
        let currentPlayerIndex = 0;
        let selected = null;

        const territories = {};

        // Inizializzazione territori
        document.querySelectorAll('.territory').forEach((el, index) => {
            const id = el.id;
            const text = el.querySelector('text');
            const polygon = el.querySelector('polygon');

            // Stato iniziale: 5 territori a testa
            const owner = index < 5 ? 'Player 1' : 'Player 2';
            const units = Math.floor(Math.random() * 4) + 3; // da 3 a 6

            territories[id] = {
                id,
                name: el.dataset.name,
                owner,
                units,
                polygon,
                textEl: text
            };

            polygon.setAttribute('fill', playerColors[owner]);
            text.textContent = units;

            polygon.addEventListener('click', () => handleClick(id));
        });

        function handleClick(id) {
            const territory = territories[id];
            const currentPlayer = players[currentPlayerIndex];

            if (territory.owner === currentPlayer) {
                selected = territory;
                document.getElementById('info').innerHTML = `Hai selezionato <strong>${territory.name}</strong> (${territory.units} unitÃ )`;
            } else if (selected && selected.id !== id) {
                document.getElementById('info').innerHTML =
                    `Simulazione attacco da <strong>${selected.name}</strong> (${selected.units}) a <strong>${territory.name}</strong> (${territory.units})<br><em>(logica attacco da implementare)</em>`;
                selected = null;
            } else {
                document.getElementById('info').textContent = 'Non puoi selezionare questo territorio.';
            }
        }

        document.getElementById('endTurn').addEventListener('click', () => {
            selected = null;
            currentPlayerIndex = (currentPlayerIndex + 1) % players.length;
            document.getElementById('currentPlayer').textContent = players[currentPlayerIndex];
            document.getElementById('info').textContent = `Turno: ${players[currentPlayerIndex]}`;
        });
    </script>
</body>

</html>