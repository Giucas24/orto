<!DOCTYPE html>
<html lang="it">

<head>
    <meta charset="UTF-8" />
    <title>🥕 Orto Conquista - La Battaglia Vegetale</title>
    <link rel="stylesheet" href="style.css">
</head>

<body>
    <div class="game-header">
        <h1>🥕 ORTO CONQUISTA 🥕</h1>
        <p>La battaglia vegetale più epica del giardino!</p>
    </div>

    <div class="game-container">
        <div class="map-container">
            <svg viewBox="0 0 800 600" id="game-map">
                <!-- Sfondo dell'orto -->
                <defs>
                    <pattern id="grass" patternUnits="userSpaceOnUse" width="20" height="20">
                        <rect width="20" height="20" fill="#7cb342" />
                        <circle cx="5" cy="5" r="1" fill="#8bc34a" />
                        <circle cx="15" cy="15" r="1" fill="#9ccc65" />
                        <circle cx="10" cy="18" r="1" fill="#689f38" />
                    </pattern>

                    <!-- Texture per le regioni -->
                    <pattern id="cipolleTex" patternUnits="userSpaceOnUse" width="15" height="15">
                        <rect width="15" height="15" fill="#d1a3d1" />
                        <circle cx="7" cy="7" r="2" fill="#c9a0dc" opacity="0.7" />
                    </pattern>

                    <pattern id="caroteTex" patternUnits="userSpaceOnUse" width="15" height="15">
                        <rect width="15" height="15" fill="#ffb347" />
                        <path d="M2,2 L8,8 L2,14 Z" fill="#ffa500" opacity="0.6" />
                    </pattern>

                    <pattern id="pomodoriTex" patternUnits="userSpaceOnUse" width="15" height="15">
                        <rect width="15" height="15" fill="#ff7f7f" />
                        <circle cx="7" cy="7" r="3" fill="#ff6347" opacity="0.8" />
                    </pattern>

                    <pattern id="broccoliTex" patternUnits="userSpaceOnUse" width="15" height="15">
                        <rect width="15" height="15" fill="#90ee90" />
                        <path d="M5,5 Q7,2 9,5 Q7,8 5,5" fill="#228b22" opacity="0.7" />
                    </pattern>

                    <pattern id="cavolfioriTex" patternUnits="userSpaceOnUse" width="15" height="15">
                        <rect width="15" height="15" fill="#e8d5e8" />
                        <circle cx="7" cy="7" r="2" fill="#ddd" opacity="0.8" />
                    </pattern>
                </defs>

                <!-- Sfondo dell'orto -->
                <rect width="800" height="600" fill="url(#grass)" />

                <!-- CIPOLLANDIA (Nord-Ovest) -->
                <path class="region-border"
                    d="M20,50 Q50,30 120,40 Q180,35 220,60 Q240,90 230,130 Q220,170 180,180 Q120,185 80,170 Q30,150 20,120 Q15,80 20,50 Z"
                    fill="url(#cipolleTex)" stroke="#8e24aa" stroke-width="3" opacity="0.8" />

                <!-- Disegno cipolle nella regione -->
                <g transform="translate(50,70)">
                    <ellipse cx="20" cy="15" rx="12" ry="18" fill="#9c27b0" />
                    <ellipse cx="20" cy="12" rx="8" ry="12" fill="#ba68c8" />
                    <path d="M15,5 Q20,0 25,5" stroke="#4a148c" stroke-width="2" fill="none" />
                </g>
                <g transform="translate(150,90)">
                    <ellipse cx="0" cy="0" rx="10" ry="15" fill="#8e24aa" />
                    <path d="M-5,-8 Q0,-12 5,-8" stroke="#4a148c" stroke-width="2" fill="none" />
                </g>

                <text x="120" y="30" text-anchor="middle" fill="#4a148c" font-size="16"
                    font-weight="bold">CIPOLLANDIA</text>

                <!-- CAROTEGNA (Nord-Est) -->
                <path class="region-border"
                    d="M280,40 Q320,25 380,30 Q450,35 500,55 Q520,80 515,120 Q510,160 480,175 Q420,185 380,180 Q320,175 290,150 Q270,120 275,80 Q275,60 280,40 Z"
                    fill="url(#caroteTex)" stroke="#f57c00" stroke-width="3" opacity="0.8" />

                <!-- Disegno carote nella regione -->
                <g transform="translate(350,70)">
                    <polygon points="0,20 -8,0 8,0" fill="#ff6f00" />
                    <polygon points="0,15 -6,0 6,0" fill="#ff8f00" />
                    <path d="M-2,-2 L-2,-8 M0,-2 L0,-10 M2,-2 L2,-8" stroke="#388e3c" stroke-width="2" />
                </g>
                <g transform="translate(420,100)">
                    <polygon points="0,15 -6,0 6,0" fill="#ef6c00" />
                    <path d="M-1,-2 L-1,-6 M1,-2 L1,-6" stroke="#2e7d32" stroke-width="1" />
                </g>

                <text x="390" y="25" text-anchor="middle" fill="#e65100" font-size="16"
                    font-weight="bold">CAROTEGNA</text>

                <!-- SAN MARZANO (Sud-Ovest) -->
                <path class="region-border"
                    d="M20,350 Q40,330 100,335 Q160,340 200,360 Q230,390 220,430 Q210,470 180,490 Q120,510 80,500 Q40,485 25,450 Q15,410 20,380 Q18,365 20,350 Z"
                    fill="url(#pomodoriTex)" stroke="#d32f2f" stroke-width="3" opacity="0.8" />

                <!-- Disegno pomodori nella regione -->
                <g transform="translate(80,400)">
                    <circle cx="0" cy="0" r="12" fill="#f44336" />
                    <circle cx="0" cy="-2" r="8" fill="#ff5722" />
                    <path d="M-8,-8 Q-5,-12 0,-10 Q5,-12 8,-8" fill="#4caf50" stroke="#2e7d32" stroke-width="1" />
                </g>
                <g transform="translate(150,440)">
                    <circle cx="0" cy="0" r="8" fill="#e53935" />
                    <path d="M-5,-6 Q0,-8 5,-6" fill="#388e3c" />
                </g>

                <text x="120" y="325" text-anchor="middle" fill="#b71c1c" font-size="16" font-weight="bold">SAN
                    MARZANO</text>

                <!-- BROCCOLANDIA (Sud-Est) -->
                <path class="region-border"
                    d="M300,350 Q340,335 400,340 Q460,345 500,365 Q530,395 520,435 Q510,475 480,495 Q420,515 380,510 Q340,505 315,480 Q290,450 295,410 Q298,380 300,350 Z"
                    fill="url(#broccoliTex)" stroke="#388e3c" stroke-width="3" opacity="0.8" />

                <!-- Disegno broccoli nella regione -->
                <g transform="translate(380,420)">
                    <ellipse cx="0" cy="5" rx="3" ry="15" fill="#2e7d32" />
                    <circle cx="-8" cy="-5" r="6" fill="#4caf50" />
                    <circle cx="0" cy="-8" r="7" fill="#43a047" />
                    <circle cx="8" cy="-5" r="6" fill="#66bb6a" />
                    <circle cx="0" cy="-2" r="5" fill="#388e3c" />
                </g>
                <g transform="translate(450,460)" scale="0.7">
                    <ellipse cx="0" cy="3" rx="2" ry="10" fill="#1b5e20" />
                    <circle cx="-5" cy="-3" r="4" fill="#4caf50" />
                    <circle cx="5" cy="-3" r="4" fill="#66bb6a" />
                    <circle cx="0" cy="-5" r="5" fill="#43a047" />
                </g>

                <text x="410" y="325" text-anchor="middle" fill="#1b5e20" font-size="16"
                    font-weight="bold">BROCCOLANDIA</text>

                <!-- REGNO DEI CAVOLFIORI (Est) -->
                <path class="region-border"
                    d="M550,50 Q590,35 650,40 Q710,45 740,70 Q760,100 755,140 Q750,180 720,200 Q660,220 620,215 Q580,210 560,185 Q540,155 545,115 Q548,85 550,50 Z"
                    fill="url(#cavolfioriTex)" stroke="#7b1fa2" stroke-width="3" opacity="0.8" />

                <!-- Disegno cavolfiori nella regione -->
                <g transform="translate(630,110)">
                    <circle cx="0" cy="5" r="15" fill="#f5f5f5" />
                    <circle cx="-8" cy="-2" r="8" fill="#eeeeee" />
                    <circle cx="8" cy="-2" r="8" fill="#e0e0e0" />
                    <circle cx="0" cy="-8" r="10" fill="#f8f8f8" />
                    <ellipse cx="0" cy="18" rx="4" ry="8" fill="#2e7d32" />
                </g>

                <text x="650" y="30" text-anchor="middle" fill="#4a148c" font-size="14" font-weight="bold">REGNO DEI
                    CAVOLFIORI</text>

                <!-- MERCATO CENTRALE -->
                <path class="region-border"
                    d="M240,220 Q280,200 350,205 Q420,210 460,235 Q480,265 475,295 Q470,325 440,340 Q370,355 330,350 Q280,345 250,320 Q220,290 225,255 Q230,235 240,220 Z"
                    fill="#f0e68c" stroke="#f57f17" stroke-width="4" opacity="0.9" />

                <!-- Edifici del Mercato Centrale -->
                <!-- Grand Bazaar - Tenda mercato -->
                <g transform="translate(280,260)">
                    <polygon points="-15,15 0,-10 15,15" fill="#d84315" />
                    <rect x="-12" y="15" width="24" height="10" fill="#8d6e63" />
                    <rect x="-8" y="18" width="4" height="7" fill="#5d4037" />
                    <rect x="4" y="18" width="4" height="7" fill="#5d4037" />
                </g>

                <!-- Seed Bank - Magazzino -->
                <g transform="translate(380,240)">
                    <rect x="-15" y="5" width="30" height="20" fill="#795548" />
                    <polygon points="-15,5 0,-5 15,5" fill="#5d4037" />
                    <circle cx="0" cy="15" r="3" fill="#ffeb3b" />
                </g>

                <!-- Compost Works - Cumulo -->
                <g transform="translate(340,300)">
                    <ellipse cx="0" cy="10" rx="20" ry="8" fill="#6d4c41" />
                    <ellipse cx="-5" cy="5" rx="12" ry="6" fill="#8d6e63" />
                    <ellipse cx="8" cy="7" rx="10" ry="5" fill="#5d4037" />
                </g>

                <!-- Greenhouse Labs - Serra -->
                <g transform="translate(420,280)">
                    <rect x="-12" y="8" width="24" height="15" fill="#c8e6c9" />
                    <polygon points="-12,8 0,-2 12,8" fill="#a5d6a7" />
                    <rect x="-8" y="12" width="3" height="8" fill="#4caf50" />
                    <rect x="5" y="12" width="3" height="8" fill="#66bb6a" />
                </g>

                <text x="360" y="195" text-anchor="middle" fill="#e65100" font-size="16" font-weight="bold">MERCATO
                    CENTRALE</text>

                <!-- Territori cliccabili (invisibili ma funzionali) -->
                <!-- Cipollandia -->
                <circle class="territory cipolle" id="bulbopoli" cx="90" cy="100" r="25" fill="transparent"
                    stroke="transparent" />
                <circle class="territory cipolle" id="tropea" cx="160" cy="80" r="25" fill="transparent"
                    stroke="transparent" />
                <circle class="territory cipolle" id="scalogna" cx="130" cy="140" r="25" fill="transparent"
                    stroke="transparent" />

                <!-- Carotegna -->
                <circle class="territory carote" id="carrot" cx="350" cy="100" r="25" fill="transparent"
                    stroke="transparent" />
                <circle class="territory carote" id="orange" cx="420" cy="80" r="25" fill="transparent"
                    stroke="transparent" />
                <circle class="territory carote" id="root" cx="380" cy="140" r="25" fill="transparent"
                    stroke="transparent" />

                <!-- San Marzano -->
                <circle class="territory pomodori" id="sanmarzano" cx="100" cy="400" r="25" fill="transparent"
                    stroke="transparent" />
                <circle class="territory pomodori" id="cherry" cx="150" cy="460" r="25" fill="transparent"
                    stroke="transparent" />
                <circle class="territory pomodori" id="pachino" cx="180" cy="400" r="25" fill="transparent"
                    stroke="transparent" />

                <!-- Broccolandia -->
                <circle class="territory broccoli" id="greenvalley" cx="360" cy="420" r="25" fill="transparent"
                    stroke="transparent" />
                <circle class="territory broccoli" id="forest" cx="430" cy="460" r="25" fill="transparent"
                    stroke="transparent" />
                <circle class="territory broccoli" id="cavolonero" cx="460" cy="400" r="25" fill="transparent"
                    stroke="transparent" />

                <!-- Regno Cavolfiori -->
                <circle class="territory cavolfiori" id="snowpeak" cx="600" cy="100" r="25" fill="transparent"
                    stroke="transparent" />
                <circle class="territory cavolfiori" id="frostland" cx="670" cy="80" r="25" fill="transparent"
                    stroke="transparent" />
                <circle class="territory cavolfiori" id="iceberg" cx="640" cy="140" r="25" fill="transparent"
                    stroke="transparent" />

                <!-- Mercato Centrale -->
                <circle class="territory neutrale" id="bazaar" cx="280" cy="260" r="20" fill="transparent"
                    stroke="transparent" />
                <circle class="territory neutrale" id="seedbank" cx="380" cy="240" r="20" fill="transparent"
                    stroke="transparent" />
                <circle class="territory neutrale" id="compost" cx="340" cy="300" r="20" fill="transparent"
                    stroke="transparent" />
                <circle class="territory neutrale" id="greenhouse" cx="420" cy="280" r="20" fill="transparent"
                    stroke="transparent" />

                <!-- Connessioni visibili -->
                <g id="connections" opacity="0.4"></g>

                <!-- Overlay per selezione territori -->
                <g id="selection-overlay"></g>

                <!-- Unit counts -->
                <g id="unit-counts"></g>

                <!-- Labels dei territori -->
                <text class="label" x="90" y="125" font-size="10">Bulbopoli</text>
                <text class="label" x="160" y="105" font-size="10">Tropea</text>
                <text class="label" x="130" y="165" font-size="10">Scalogna</text>

                <text class="label" x="350" y="125" font-size="10">Carrot City</text>
                <text class="label" x="420" y="105" font-size="10">Orange County</text>
                <text class="label" x="380" y="165" font-size="10">Root Deep</text>

                <text class="label" x="100" y="425" font-size="10">San Marzano</text>
                <text class="label" x="150" y="485" font-size="10">Cherry Valley</text>
                <text class="label" x="180" y="425" font-size="10">Pachino</text>

                <text class="label" x="360" y="445" font-size="10">Green Valley</text>
                <text class="label" x="430" y="485" font-size="10">Forest</text>
                <text class="label" x="460" y="425" font-size="10">Cavolo Nero</text>

                <text class="label" x="600" y="125" font-size="10">Snow Peak</text>
                <text class="label" x="670" y="105" font-size="10">Frost Land</text>
                <text class="label" x="640" y="165" font-size="10">Iceberg</text>

                <text class="label" x="280" y="285" font-size="9">Bazaar</text>
                <text class="label" x="380" y="265" font-size="9">Seed Bank</text>
                <text class="label" x="340" y="325" font-size="9">Compost</text>
                <text class="label" x="420" y="305" font-size="9">Greenhouse</text>
            </svg>
        </div>

        <div class="controls-panel">
            <div class="current-player" id="current-player">
                <h3>🎯 Turno di: <span id="player-name">Cavolfiori</span></h3>
                <div style="display: flex; align-items: center; justify-content: center; gap: 10px;">
                    <div id="player-color"
                        style="width: 25px; height: 25px; border-radius: 50%; border: 3px solid #333;"></div>
                    <span id="player-emoji" style="font-size: 24px;">❄️</span>
                </div>
                <div>Turno: <span id="turn-counter">1</span></div>
            </div>

            <div class="phase-indicator" id="phase-indicator">
                <strong>🎮 Fase: <span id="current-phase">Rinforzi</span></strong>
                <div id="phase-timer" style="margin-top: 5px; font-size: 12px;">⏰ Tempo illimitato</div>
            </div>

            <div class="faction-info" id="faction-info">
                <h4 id="faction-name">❄️ Clan dei Cavolfiori</h4>
                <p><strong>👑 Leader:</strong> <span id="leader-name">Generale Cavolo Brassius</span></p>
                <p><strong>🔮 Abilità:</strong> <span id="ability-name">Resistenza Glaciale</span></p>
                <p><small id="ability-desc">Una volta per turno può rigenerare 1 unità</small></p>
                <p><strong>💪 Bonus:</strong> <span id="faction-bonus">+1 difesa in montagna</span></p>
                <p><strong>⚠️ Debolezza:</strong> <span id="faction-weakness">-1 vs Carote</span></p>

                <div class="stat-item">
                    <span>🏰 Territori:</span>
                    <span id="territory-count">3</span>
                </div>
                <div class="stat-item">
                    <span>🎖️ Rinforzi:</span>
                    <span id="reinforcements">4</span>
                </div>

                <button class="button special" id="leader-ability" onclick="useLeaderAbility()">
                    🌟 Usa Abilità Leader
                </button>
            </div>

            <div class="controls">
                <button class="button" id="place-reinforcements" onclick="placeReinforcements()">
                    ⚡ Piazza Rinforzi Auto
                </button>
                <button class="button attack" id="attack-btn" onclick="toggleAttackMode()" disabled>
                    ⚔️ Modalità Attacco
                </button>
                <button class="button" id="end-turn" onclick="endTurn()" disabled>
                    🔄 Fine Turno
                </button>
            </div>

            <div class="cards-section" id="cards-section">
                <h4>🎴 Carte Evento</h4>
                <div id="card-deck-container">
                    <div class="card-deck" id="card-deck" onclick="drawEventCard()">
                        <div class="card-back">
                            <div class="card-pattern">🌱</div>
                            <div class="card-title">MAZZO</div>
                            <div class="card-pattern">🍃</div>
                        </div>
                        <div class="cards-remaining" id="cards-remaining">12</div>
                    </div>
                </div>
                <div id="player-cards" class="player-cards">
                    <!-- Le carte in mano del giocatore appariranno qui -->
                </div>
            </div>

            <div class="battle-log">
                <h4>📜 Log delle Battaglie</h4>
                <div id="log-content">
                    <div class="log-entry log-move">🎮 Orto Conquista iniziato! I Cavolfiori preparano la loro strategia
                        glaciale...</div>
                </div>
            </div>

            <div class="stats-panel">
                <h4>📊 Statistiche</h4>
                <div class="stat-item">
                    <span>🌍 Territori Totali:</span>
                    <span>16</span>
                </div>
                <div class="stat-item">
                    <span>⚔️ Battaglie:</span>
                    <span id="battle-count">0</span>
                </div>
                <div class="stat-item">
                    <span>🎯 Obiettivo:</span>
                    <span>Conquista Totale</span>
                </div>
            </div>
        </div>
    </div>

    <!-- Overlay per le fasi -->
    <div class="phase-overlay" id="phase-overlay">
        <div class="phase-content">
            <div class="phase-icon" id="phase-icon">⚡</div>
            <div class="phase-text" id="phase-text">Fase Rinforzi</div>
        </div>
    </div>

    <!-- Overlay carta pescata -->
    <div class="card-drawn-overlay" id="card-drawn-overlay">
        <div class="card-drawn-content">
            <div class="drawn-card" id="drawn-card">
                <div class="card-header">
                    <span class="card-name" id="drawn-card-name">Nome Carta</span>
                    <button class="close-card" onclick="closeDrawnCard()">×</button>
                </div>
                <div class="card-description" id="drawn-card-description">Descrizione della carta</div>
                <div class="card-effect" id="drawn-card-effect">Effetto speciale</div>
                <button class="button use-card" id="use-drawn-card" onclick="useDrawnCard()">🎯 Usa Carta</button>
            </div>
        </div>
    </div>

    <div class="victory-screen" id="victory-screen">
        <div class="victory-content">
            <h2 id="victory-title">🏆 VITTORIA! 🏆</h2>
            <p id="victory-message">I Cavolfiori hanno conquistato l'orto!</p>
            <button class="button" onclick="resetGame()">🔄 Nuova Partita</button>
        </div>
    </div>

    <script src="script.js"></script>
</body>

</html>